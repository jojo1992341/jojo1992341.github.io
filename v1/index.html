<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Coach Progression | Pompes & Abdominaux</title>
    
    <!-- PWA & Mobile -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#1A1A2E">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="apple-touch-icon" href="icon-192.png">
    
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <header class="header" role="banner">
        <div class="header-content">
            <h1 class="main-title">
                <span class="title-icon" aria-hidden="true">üí™</span>
                Coach Progression
            </h1>
            <p class="subtitle">Votre programme intelligent de pompes et abdominaux</p>
        </div>
    </header>

    <main class="container" role="main">
        
        <!-- SECTION 1: CONFIGURATION (SETUP) -->
        <section id="setupSection" class="setup-section" aria-labelledby="setupTitle">
            <div class="card setup-card">
                <h2 id="setupTitle" class="section-title">Nouvelle Semaine</h2>
                
                <div class="form-group">
                    <label for="exerciseSelect" class="form-label">Exercice</label>
                    <select id="exerciseSelect" class="form-select">
                        <option value="pompes">Pompes</option>
                        <option value="abdominaux">Abdominaux</option>
                    </select>
                </div>

                <div class="form-group-row">
                    <div class="form-group">
                        <label for="maxReps" class="form-label">Max Actuel</label>
                        <input 
                            type="number" 
                            id="maxReps" 
                            class="form-input" 
                            min="1" 
                            max="999" 
                            placeholder="Ex: 20"
                            required
                        >
                    </div>
                    <div class="form-group">
                        <label for="targetReps" class="form-label">Objectif (Optionnel)</label>
                        <input 
                            type="number" 
                            id="targetReps" 
                            class="form-input" 
                            min="1" 
                            max="999" 
                            placeholder="Ex: 50"
                        >
                    </div>
                </div>
                <p class="form-hint" style="margin-top: -1rem; margin-bottom: 1.5rem;">Testez votre max actuel sur une seule s√©rie.</p>

                <button id="generateBtn" class="btn btn-primary">
                    <span class="btn-icon" aria-hidden="true">üöÄ</span>
                    G√©n√©rer mon programme
                </button>
            </div>

            <!-- GESTION DES DONN√âES -->
            <div class="card data-card">
                <h3 class="section-title" style="font-size: 1.2rem; margin-bottom: 1rem;">Donn√©es & Sauvegarde</h3>
                <div class="data-actions">
                    <button id="exportBtn" class="btn btn-secondary">
                        üíæ Exporter (JSON)
                    </button>
                    <button id="importBtn" class="btn btn-secondary">
                        üìÇ Importer
                    </button>
                    <input type="file" id="importFile" class="hidden" accept=".json" aria-label="Fichier de sauvegarde">
                </div>
            </div>
        </section>

        <!-- SECTION 2: PROGRAMME EN COURS -->
        <section id="programSection" class="program-section hidden" aria-live="polite">
            
            <!-- Info Semaine & Objectif -->
            <div class="card info-card">
                <div class="week-info">
                    <div class="week-badge">
                        <span class="badge-label">Semaine</span>
                        <span class="badge-number" id="weekNumber">1</span>
                    </div>
                    <div class="week-details">
                        <h3 class="week-title" id="weekTitle">Pompes</h3>
                        <div class="stats-grid">
                            <p class="week-stat">Max actuel: <strong id="weekMax">0</strong></p>
                            <div id="goalContainer" class="week-stat goal-stat hidden">
                                <span aria-hidden="true">üéØ</span> Objectif: <strong id="goalValue">0</strong>
                                <span id="predictionBadge" class="prediction-badge">üìÖ Calcul...</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Explication Globale -->
            <div class="card pedagogy-card">
                <h3 class="pedagogy-title">
                    <span class="pedagogy-icon" aria-hidden="true">üéì</span>
                    Analyse
                </h3>
                <p class="pedagogy-text" id="globalExplanation">
                    <!-- Inject√© par JS -->
                </p>
            </div>

            <!-- Graphique avec Toggles -->
            <div class="card chart-card">
                <div class="chart-header">
                    <h3 class="program-title" style="margin-bottom: 0; font-size: 1.2rem;">Progression</h3>
                    <div class="chart-controls" role="group" aria-label="M√©trique du graphique">
                        <button class="chart-toggle active" data-metric="max" aria-pressed="true">Max</button>
                        <button class="chart-toggle" data-metric="volume" aria-pressed="false">Volume</button>
                    </div>
                </div>
                <div id="progressionChart" class="chart-container" aria-label="Graphique de progression">
                    <!-- SVG inject√© par JS -->
                </div>
            </div>

            <!-- Tableau -->
            <div class="card program-card">
                <div class="program-table-container">
                    <table class="program-table">
                        <thead>
                            <tr>
                                <th>Jour / Type</th>
                                <th>S√©ries</th>
                                <th>Reps</th>
                                <th>Repos</th>
                                <th>Objectif</th>
                            </tr>
                        </thead>
                        <tbody id="programTableBody">
                            <!-- Inject√© par JS -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Feedback -->
            <div class="card feedback-card">
                <h3 class="feedback-title">
                    <span class="feedback-icon" aria-hidden="true">üìù</span>
                    Suivi quotidien
                </h3>
                <div id="dailyFeedbackContainer" class="daily-feedback-container">
                    <!-- Inject√© par JS -->
                </div>
            </div>

            <!-- Actions -->
            <div class="actions">
                <button id="reopenWeekBtn" class="btn btn-secondary">
                    <span class="btn-icon" aria-hidden="true">üìã</span> Actuel
                </button>
                <button id="newWeekBtn" class="btn btn-primary">
                    <span class="btn-icon" aria-hidden="true">‚ûï</span> Nouvelle semaine
                </button>
                <button id="historyBtn" class="btn btn-secondary">
                    <span class="btn-icon" aria-hidden="true">üìä</span> Historique
                </button>
            </div>
        </section>

        <!-- SECTION 3: HISTORIQUE (MODAL) -->
        <section id="historySection" class="history-section hidden" role="dialog" aria-modal="true" aria-labelledby="histTitle">
            <div class="card history-card">
                <div class="history-header">
                    <h2 id="histTitle" class="section-title">Historique</h2>
                    <button id="closeHistoryBtn" class="btn btn-icon-only" aria-label="Fermer l'historique">‚úï</button>
                </div>
                <div id="historyContent" class="history-content">
                    <!-- Inject√© par JS -->
                </div>
            </div>
        </section>

    </main>

    <!-- OVERLAY TIMER -->
    <div id="timerOverlay" class="timer-overlay hidden" role="dialog" aria-modal="true" aria-label="Minuteur de repos">
        <div class="timer-card">
            <div class="timer-header">R√©cup√©ration</div>
            <div id="timerDisplay" class="timer-display" aria-live="off">00:00</div>
            <div class="timer-controls">
                <button id="addTimeBtn" class="btn btn-secondary btn-sm">+30s</button>
                <button id="skipTimerBtn" class="btn btn-primary btn-sm">Reprendre</button>
            </div>
        </div>
    </div>

    <footer class="footer">
        <p>Coach Progression ¬© 2026</p>
    </footer>

    <script src="script.js"></script>
</body>
</html>